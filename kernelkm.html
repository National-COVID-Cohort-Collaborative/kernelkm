<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>kernelkm package &mdash; kernelkm 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="src" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> kernelkm
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">src</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">kernelkm package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kernelkm.elbow">kernelkm.elbow module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kernelkm.gap_stat">kernelkm.gap_stat module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kernelkm.kernel_k_means">kernelkm.kernel_k_means module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kernelkm.my_matrix">kernelkm.my_matrix module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kernelkm">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">kernelkm</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">src</a> &raquo;</li>
      <li>kernelkm package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/kernelkm.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="kernelkm-package">
<h1>kernelkm package<a class="headerlink" href="#kernelkm-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-kernelkm.elbow">
<span id="kernelkm-elbow-module"></span><h2>kernelkm.elbow module<a class="headerlink" href="#module-kernelkm.elbow" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="kernelkm.elbow.Elbow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kernelkm.elbow.</span></span><span class="sig-name descname"><span class="pre">Elbow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datamat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patient_id_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.elbow.Elbow" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Elbow heuristic for choosing a good k (number of clusters) when applying kernel k-means algorithm</p>
<p>K means clustering requires a k parameter that specifies how many clusters should be used during
clustering. In many cases, we would like a data-driven way of choosing the appropriate k.</p>
<p>The elbow method does just this. To use the elbow method, we choose a range of k’s to investigate
(say, 1 through 10), and for each k, we cluster the data, then determine the sum squared errors (SSE)
for each k. The SSE is the sum of the square of the Euclidean distance from each data points (here a
patient) to the centroid of the cluster to which the data point has been assigned. We then choose 
the k at which the SSE begins to level off.</p>
<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.elbow.Elbow.get_sse_for_up_to_k_clusters">
<span class="sig-name descname"><span class="pre">get_sse_for_up_to_k_clusters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="headerlink" href="#kernelkm.elbow.Elbow.get_sse_for_up_to_k_clusters" title="Permalink to this definition"></a></dt>
<dd><p>Get SSE for a range of k values, used to generate the data to apply the Elbow method</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-kernelkm.gap_stat">
<span id="kernelkm-gap-stat-module"></span><h2>kernelkm.gap_stat module<a class="headerlink" href="#module-kernelkm.gap_stat" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="kernelkm.gap_stat.GapStat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kernelkm.gap_stat.</span></span><span class="sig-name descname"><span class="pre">GapStat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datamat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patient_id_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.gap_stat.GapStat" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Gap statistic for kernel k-means algorithm</p>
<p>Gap statistic is a method for choosing an appropriate k (number of clusters) for
k means clustering. See here for a good explanation:
<a class="reference external" href="https://towardsdatascience.com/k-means-clustering-and-the-gap-statistics-4c5d414acd29">https://towardsdatascience.com/k-means-clustering-and-the-gap-statistics-4c5d414acd29</a></p>
<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.gap_stat.GapStat.calculate_good_k">
<span class="sig-name descname"><span class="pre">calculate_good_k</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">do_all_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.gap_stat.GapStat.calculate_good_k" title="Permalink to this definition"></a></dt>
<dd><p>Calculate a good k to use for k means clustering using the gap statistic</p>
<p>data check in KernelKMeans class!
do_all_k: If true, do not stop after we have found the optimum k, but go on up to self._max_k,
which we need for outputting a GapStat figure and debugging, but do not need to actually get the 
optimum k.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-kernelkm.kernel_k_means">
<span id="kernelkm-kernel-k-means-module"></span><h2>kernelkm.kernel_k_means module<a class="headerlink" href="#module-kernelkm.kernel_k_means" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="kernelkm.kernel_k_means.KernelKMeans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kernelkm.kernel_k_means.</span></span><span class="sig-name descname"><span class="pre">KernelKMeans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datamat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patient_id_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.kernel_k_means.KernelKMeans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Perform K-means clustering starting from a similarity (kernel) matrix.
This type of K-means clustering is not supported out of the box by scikit learn.
The code was developed for use in the N3C platform.</p>
<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.kernel_k_means.KernelKMeans.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.kernel_k_means.KernelKMeans.calculate" title="Permalink to this definition"></a></dt>
<dd><p>Run k means clustering for the given k (number of clusters)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.kernel_k_means.KernelKMeans.calculate_sse">
<span class="sig-name descname"><span class="pre">calculate_sse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">centroids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centroid_assignments</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.kernel_k_means.KernelKMeans.calculate_sse" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the SSE for a given clustering</p>
<p>The SSE is the sum of the square of the Euclidean distance from each data points (here a
patient) to the centroid of the cluster to which the data point has been assigned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.kernel_k_means.KernelKMeans.get_max_value">
<span class="sig-name descname"><span class="pre">get_max_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#kernelkm.kernel_k_means.KernelKMeans.get_max_value" title="Permalink to this definition"></a></dt>
<dd><p>Return the largest similarity observed in the entire patient-patient similarity matrix</p>
<p>return:  maximum over all data points</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.kernel_k_means.KernelKMeans.get_patient_count">
<span class="sig-name descname"><span class="pre">get_patient_count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#kernelkm.kernel_k_means.KernelKMeans.get_patient_count" title="Permalink to this definition"></a></dt>
<dd><p>Helper function to return the number of patients in the patient list of the KernelKMeans instance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.kernel_k_means.KernelKMeans.plus_plus">
<span class="sig-name descname"><span class="pre">plus_plus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.kernel_k_means.KernelKMeans.plus_plus" title="Permalink to this definition"></a></dt>
<dd><p>Create cluster centroids using the k-means++ algorithm.</p>
<p>This method makes an effort to choose centroids that are far apart from one another when initializing
the clustering. This in theory reduces the chance of very bad clustering that results from poorly chosen
initial centroids. Inspiration from here:
<a class="reference external" href="https://stackoverflow.com/questions/5466323/how-could-one-implement-the-k-means-algorithm">https://stackoverflow.com/questions/5466323/how-could-one-implement-the-k-means-algorithm</a></p>
<dl class="simple">
<dt>ds<span class="classifier">numpy array</span></dt><dd><p>The dataset to be used for centroid initialization.</p>
</dd>
<dt>k<span class="classifier">int</span></dt><dd><p>The desired number of clusters for which centroids are required.</p>
</dd>
</dl>
<dl class="simple">
<dt>centroids<span class="classifier">numpy array</span></dt><dd><p>Collection of k centroids as a numpy array.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-kernelkm.my_matrix">
<span id="kernelkm-my-matrix-module"></span><h2>kernelkm.my_matrix module<a class="headerlink" href="#module-kernelkm.my_matrix" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="kernelkm.my_matrix.MyMatrix">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kernelkm.my_matrix.</span></span><span class="sig-name descname"><span class="pre">MyMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kernelkm.my_matrix.MyMatrix" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>MyMatrix is a class to represent a patient-patient similarity matrix. There are helper methods to
produce randomized matrices, which are used for example in measuring the similarity of patients to
randomized clusters of patient for measuring generalizability of clusters.</p>
<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.my_matrix.MyMatrix.get_permuted_matrix">
<span class="sig-name descname"><span class="pre">get_permuted_matrix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="headerlink" href="#kernelkm.my_matrix.MyMatrix.get_permuted_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Permutate all values in matrix that are NOT on the diagonal
Note that the matrix returned by this method is not symmetric about the diagonal</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kernelkm.my_matrix.MyMatrix.get_permuted_symmetric">
<span class="sig-name descname"><span class="pre">get_permuted_symmetric</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">array</span></span></span><a class="headerlink" href="#kernelkm.my_matrix.MyMatrix.get_permuted_symmetric" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-kernelkm">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-kernelkm" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="src" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Foobar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>